---
import Layout from '../../layouts/Layout.astro';
import PageHeader from '../../components/PageHeader.astro';
import Button from '../../components/Button.astro';
---

<Layout title="Orders">
  <PageHeader title="Find an Order" />
  <div class="fields">
    <div class="field">
      <label>Number</label>
      <input type="text" />
    </div>
    <div class="field">
      <label>Email</label>
      <input type="text" />
    </div>
  </div>
  <Button class="search-button" paddingX={18} passiveText="Searching">Search</Button>
  <p class="not-found">This order was not found.</p>
</Layout>

<script>
  const button = document.querySelector('.search-button') as HTMLButtonElement;
  const notFound = document.querySelector('.not-found') as HTMLElement;

  button.addEventListener('click', () => {
    if (button.classList.contains('passive')) return;
    notFound.style.display = 'none';
    button.textContent = button.dataset.passiveText!;
    button.classList.add('passive');
    // Fake a query and show "not found" after 1s.
    setTimeout(() => {
      button.textContent = 'Search';
      button.classList.remove('passive');
      notFound.style.display = 'block';
    }, 1000);
  });
</script>

<style>
  .fields {
    margin-top: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .field {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 48px;
  }

  .field label {
    width: 72px;
  }

  .field input {
    width: 192px;
    border: none;
    border-bottom: 1px solid var(--color-text);
    outline: none;
    background: transparent;
  }

  :global(.search-button) {
    margin-top: 48px;
  }

  .not-found {
    margin-top: 24px;
    font-style: italic;
    display: none;
  }
</style>
